<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="pin.png" type="image/png">
    <title>Si Hitam Tam</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap');

        :root {
            --transition-speed: 0.8s;
            --mobile-transition-speed: 0.5s;
        }
        
        * {
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            color: white;
            margin: 0;
            background-color: #1a1a1a;
            overflow-x: hidden;
        }

        .main-container {
            width: 100%;
            min-height: 100vh;
            height: 100vh;
            background-size: cover;
            background-position: center;
            position: relative;
            display: flex;
            flex-direction: column;
            transition: background-image 1s ease-in-out;
        }

        .main-container::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 5%, transparent 40%), 
                        linear-gradient(to right, rgba(0,0,0,0.7), rgba(0,0,0,0.1));
            z-index: 1;
        }

        header, main {
            position: relative;
            z-index: 2;
            padding: 0 5%;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 30px;
            flex-shrink: 0; /* Mencegah header menyusut */
        }

        .logo { font-weight: 800; font-size: 2.1rem; }
        
        nav { 
            display: flex; 
            gap: 25px;
        }
        nav a { color: white; text-decoration: none; font-size: 0.8rem; transition: color 0.3s; }
        nav a:hover { color: #f9b900; }
        
        .hamburger-menu {
            display: none;
            width: 30px;
            height: 22px;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            z-index: 101;
        }
        .hamburger-menu .bar {
            width: 100%;
            height: 3px;
            background-color: white;
            border-radius: 2px;
        }

        .nav-overlay {
            position: fixed;
            top: 0;
            right: 0;
            width: 70%;
            height: 100%;
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(10px);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transform: translateX(100%);
            transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
        }
        .nav-overlay.open {
            transform: translateX(0);
        }
        .nav-overlay a {
            color: white; text-decoration: none; font-size: 1.5rem;
            font-weight: 700; margin: 20px 0; opacity: 0;
            transform: translateY(20px); transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .nav-overlay.open a { opacity: 1; transform: translateY(0); }
        .nav-overlay.open a:nth-child(1) { transition-delay: 0.2s; }
        .nav-overlay.open a:nth-child(2) { transition-delay: 0.3s; }
        .nav-overlay.open a:nth-child(3) { transition-delay: 0.4s; }
        
        .close-btn {
            position: absolute; top: 30px; right: 5%;
            font-size: 2.5rem; color: white; cursor: pointer;
        }

        main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-grow: 1;
            gap: 20px;
        }

        .text-content {
            flex-basis: 50%;
            position: relative;
            overflow: hidden;
        }

        .text-wrapper {
            transition: transform var(--transition-speed) cubic-bezier(0.8, 0, 0.2, 1), opacity var(--transition-speed) ease;
        }
        .text-wrapper.exit {
            transform: translateY(-50px);
            opacity: 0;
        }

        .location-category { font-size: 1rem; letter-spacing: 1px; }
        .location-title {
            font-size: 5.5rem; font-weight: 800;
            line-height: 1.1; margin: 10px 0 20px 0;
        }
        .location-description { max-width: 400px; line-height: 1.6; }
        .discover-btn {
            background-color: #f9b900; color: #1a1a1a; border: none;
            padding: 12px 25px; font-weight: 700; cursor: pointer;
            margin-top: 20px; transition: background-color 0.3s;
        }
        .discover-btn:hover { background-color: #fff; }

        .card-slider { 
            flex-basis: 50%; 
            overflow: hidden;
            cursor: grab;
        }
        .card-container {
            display: flex;
            gap: 15px;
        }
        .card-container.has-transition {
            transition: transform var(--transition-speed) cubic-bezier(0.8, 0, 0.2, 1);
        }
        /* Animasi geser mobile yang lebih menarik */
        .card-container.mobile-transition {
            transition: transform var(--mobile-transition-speed) cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card {
            position: relative; width: 140px; height: 210px;
            border-radius: 12px; overflow: hidden; cursor: pointer;
            border: 2px solid transparent; flex-shrink: 0;
            transition: transform 0.5s ease, opacity 0.5s ease, border-color 0.4s ease;
            user-select: none;
        }
        .card img {
            width: 100%; height: 100%; object-fit: cover;
            transition: transform 0.4s ease; pointer-events: none;
        }
        .card:hover img { transform: scale(1.05); }
        .card.active { 
            border-color: white; 
            transform: scale(1.05);
            opacity: 1;
        }
        .card-label {
            position: absolute; bottom: 15px; left: 15px;
            font-weight: 700; font-size: 1rem; line-height: 1.2;
            text-shadow: 0 2px 5px rgba(0,0,0,0.7);
        }
        
        @media (max-width: 900px) {
            body { overflow-y: auto; }
            .main-container { height: auto; min-height: 100vh; }
            
            nav { display: none; }
            .hamburger-menu { display: flex; }

            main { 
                flex-direction: column; 
                justify-content: flex-start; /* Konten mulai dari atas */
                padding-top: 5vh; /* Jarak dari header */
                padding-bottom: 5vh; 
                text-align: center;
            }
            .text-content { 
                order: 2; 
                width: 100%;
                flex-basis: auto;
            }
            .location-title { font-size: 3rem; }
            
            .card-slider { 
                order: 1; 
                width: 100%;
                margin-bottom: 30px; /* Jarak antara kartu dan judul */
            }

            /* Efek scale untuk kartu di mobile */
            .card {
                transform: scale(0.9);
                opacity: 0.8;
            }
            .card.active {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <header>
            <div class="logo">HITAM</div>
            <nav>
                <a href="#">HOME</a>
                <a href="#">DESTINATIONS</a>
                <a href="#">CONTACTS</a>
            </nav>
            <div class="hamburger-menu" id="hamburger-menu">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </header>

        <div class="nav-overlay" id="nav-overlay">
            <div class="close-btn" id="close-btn">Ã—</div>
            <a href="#">HOME</a>
            <a href="#">DESTINATIONS</a>
            <a href="#">CONTACTS</a>
        </div>

        <main>
            <div class="text-content">
                <div class="text-wrapper">
                    <p class="location-category"></p>
                    <h1 class="location-title"></h1>
                    <p class="location-description"></p>
                    <button class="discover-btn">Lihat Rute Lokasi</button>
                </div>
            </div>
            <div class="card-slider" id="card-slider">
                <div class="card-container" id="card-container">
                    </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slideData = [
                { background: "bulo.jpeg", img: "bulo.jpeg", category: "Bulo, Polewali", title: "Bukit<br>Senayan", description: "Wisata di puncak Pegunungan Bulo ini menawarkan keindahan panorama alam pegunungan berpadu awan bak lukisan.", coords: { lat: -3.2219239753365283,  lon: 119.16577214799604 } },
                { background: "bulu.png", img: "bulu.png", category: "Tinambung, Polewali", title: "Buttu<br>Bulu", description: "Buttu Bulu yang Berlokasi di tinambung, merupakan salah satu gunung dengan ketinggian 542 MDPL yang menawan.", coords: { lat: -3.25316750068016, lon: 119.35560631488153} },
                { background: "sigit (1).jpg", img: "sigit (1).jpg", category: "Baruga, Majene", title: "Buttu<br>Sigitung", description: "objek wisata pendakian yang terletak di Desa Buttu Baruga, Objek wisata alam ini menawarkan lanskap hijau, udara sejuk, dan pemandangan alam yang tenang, menjadikannya tempat populer untuk pendakian ringan, perkemahan, dan rekreasi. ", coords: { lat: -3.4637168758583194,  lon: 118.9336195814932 } },
                { background: "anugerah.png", img: "anugerah.png", category: "Bulo, Polewali", title: "Bukit<br>Anugerah", description: "Bukit Anugerah terletak di Desa Bulo. Kawasan wisata pada ketinggian 500 Mdpl ini menawarkan keindahan hamparan panorama awan.", coords: { lat: -3.217030728224696, lon: 119.16499298220798 } },
                { background: "ya.png", img: "ya.png", category: "Balanipa, Polewali", title: "Buttu<br>Bendera", description:"Puncak atau Buttu Bendera merupakan salah satu destinasi wisata yang lagi Hits di Kabupaten Polewali Mandar dengan Ketinggian mencapai 570 MDPL.", coords: { lat: -3.465682744641748, lon: 119.07301450160044 } }
            ];

            const hamburgerMenu = document.getElementById('hamburger-menu');
            const navOverlay = document.getElementById('nav-overlay');
            const closeBtn = document.getElementById('close-btn');
            hamburgerMenu.addEventListener('click', () => navOverlay.classList.add('open'));
            closeBtn.addEventListener('click', () => navOverlay.classList.remove('open'));
            navOverlay.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => navOverlay.classList.remove('open'));
            });

            const cardSlider = document.getElementById('card-slider');
            const cardContainer = document.getElementById('card-container');
            const textWrapper = document.querySelector('.text-wrapper');
            const mainContainer = document.querySelector('.main-container');
            const locCategory = document.querySelector('.location-category');
            const locTitle = document.querySelector('.location-title');
            const locDescription = document.querySelector('.location-description');
            const discoverBtn = document.querySelector('.discover-btn');
            
            function updateTextContent(index) {
                const data = slideData[index % slideData.length];
                if (!data) return;
                if (locTitle.innerHTML === data.title) return;

                textWrapper.classList.add('exit');
                setTimeout(() => {
                    mainContainer.style.backgroundImage = `url('${data.background}')`;
                    locCategory.textContent = data.category;
                    locTitle.innerHTML = data.title;
                    locDescription.textContent = data.description;
                    discoverBtn.dataset.lat = data.coords.lat;
                    discoverBtn.dataset.lon = data.coords.lon;
                    textWrapper.classList.remove('exit');
                }, 400);
            }
            
            function updateActiveCard(index) {
                const realDataIndex = index % slideData.length;
                 document.querySelectorAll('.card').forEach(c => {
                    c.classList.toggle('active', parseInt(c.dataset.index) === realDataIndex);
                });
            }

            if (window.innerWidth > 900) {
                // --- LOGIKA DESKTOP DENGAN INFINITE LOOP (STABIL) ---
                const numSlides = slideData.length;
                const cardWidth = 140; const cardGap = 15;
                const totalCardWidth = cardWidth + cardGap;
                let currentIndex = 0; let slideInterval;
                let isTransitioning = false;

                [...slideData, ...slideData].forEach((data, index) => {
                    const card = document.createElement('div');
                    card.className = 'card'; card.dataset.index = index % numSlides;
                    card.innerHTML = `<img src="${data.img}" alt="${data.title.replace('<br>', ' ')}"><div class="card-label">${data.title}</div>`;
                    cardContainer.appendChild(card);
                });

                function moveToSlide(index, withTransition = true) {
                    isTransitioning = true;
                    if (withTransition) cardContainer.classList.add('has-transition');
                    else cardContainer.classList.remove('has-transition');
                    
                    cardContainer.style.transform = `translateX(-${index * totalCardWidth}px)`;
                    updateTextContent(index);
                    updateActiveCard(index);
                }

                function nextSlide() {
                    currentIndex++;
                    moveToSlide(currentIndex);
                }

                cardContainer.addEventListener('transitionend', () => {
                    isTransitioning = false;
                    if (currentIndex >= numSlides) {
                        currentIndex %= numSlides;
                        moveToSlide(currentIndex, false);
                    }
                });
                
                function startSlideshow() {
                    clearInterval(slideInterval);
                    slideInterval = setInterval(nextSlide, 5000);
                }
                
                document.querySelectorAll('.card').forEach((card, physicalIndex) => {
                    card.addEventListener('click', (e) => {
                        if (isTransitioning) return;
                        currentIndex = physicalIndex;
                        moveToSlide(currentIndex);
                        startSlideshow();
                    });
                });
                
                moveToSlide(0, false);
                startSlideshow();

            } else {
                // --- LOGIKA MOBILE DENGAN SWIPE DAN TRANSFORM (STABIL & BISA SCROLL) ---
                const numSlides = slideData.length;
                const cardWidth = 140; const cardGap = 15;
                const totalCardWidth = cardWidth + cardGap;
                
                const clonesStart = slideData.slice(-2);
                const clonesEnd = slideData.slice(0, 2);
                const allMobileData = [...clonesStart, ...slideData, ...clonesEnd];

                allMobileData.forEach((data, index) => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.index = index - clonesStart.length;
                    card.innerHTML = `<img src="${data.img}" alt="${data.title.replace('<br>', ' ')}"><div class="card-label">${data.title}</div>`;
                    cardContainer.appendChild(card);
                });

                let currentIndex = clonesStart.length;
                let startX = 0, currentTranslate = 0, prevTranslate = 0;
                let isDragging = false, scrollDirection = null;
                
                const initialOffset = (cardSlider.offsetWidth / 2) - (cardWidth / 2);

                function setPositionByIndex(withTransition = true) {
                    currentTranslate = -currentIndex * totalCardWidth + initialOffset;
                    if(withTransition) cardContainer.classList.add('mobile-transition');
                    else cardContainer.classList.remove('mobile-transition');
                    cardContainer.style.transform = `translateX(${currentTranslate}px)`;
                    
                    const realIndex = (currentIndex - clonesStart.length + numSlides*100) % numSlides;
                    updateTextContent(realIndex);
                    updateActiveCard(realIndex);
                }
                
                setPositionByIndex(false);
                
                function touchStart(e) {
                    startX = e.touches[0].clientX;
                    isDragging = true;
                    scrollDirection = null;
                    cardContainer.classList.remove('mobile-transition');
                    prevTranslate = currentTranslate;
                }

                function touchMove(e) {
                    if (!isDragging) return;
                    const currentX = e.touches[0].clientX;
                    const diff = currentX - startX;

                    if (scrollDirection === null) {
                        scrollDirection = Math.abs(diff) > 5 ? 'horizontal' : 'vertical';
                    }
                    if (scrollDirection === 'horizontal') {
                        e.preventDefault();
                        currentTranslate = prevTranslate + diff;
                        cardContainer.style.transform = `translateX(${currentTranslate}px)`;
                    }
                }

                function touchEnd() {
                    if (!isDragging || scrollDirection !== 'horizontal') {
                        isDragging = false;
                        return;
                    };
                    isDragging = false;
                    const movedBy = currentTranslate - prevTranslate;

                    if (movedBy < -50) currentIndex++;
                    else if (movedBy > 50) currentIndex--;
                    
                    setPositionByIndex();
                }

                cardSlider.addEventListener('touchstart', touchStart);
                cardSlider.addEventListener('touchmove', touchMove, { passive: false });
                cardSlider.addEventListener('touchend', touchEnd);
                cardSlider.addEventListener('touchcancel', touchEnd);


                cardContainer.addEventListener('transitionend', () => {
                    if (currentIndex >= numSlides + clonesStart.length) {
                        currentIndex = clonesStart.length + (currentIndex % numSlides);
                        setPositionByIndex(false);
                    }
                    if (currentIndex < clonesStart.length) {
                        currentIndex = numSlides + clonesStart.length - 1; // Lompat ke kloningan terakhir
                        setPositionByIndex(false);
                    }
                });
            }

            discoverBtn.addEventListener('click', () => {
                const { lat, lon } = discoverBtn.dataset;
                if (lat && lon) {
                    window.open(`http://googleusercontent.com/maps/google.com/0{lat},${lon}`, '_blank');
                }
            });
        });
    </script>
</body>
</html>